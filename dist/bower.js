/*    
 * @license requirejs - plugin - bower 0.0.1
 * Copyright(c) 2014, Rodney Robert Ebanks foss@rodneyebanks.com All Rights Reserved.
 * Available via the MIT or new BSD license.
 */

(function(){"use strict";define("bower",["module","json"],function(module,json){var defaults={file:"/bower.json",baseUrl:"../bower_components",extensions:"js|css",ignore:"requirejs|requirejs-domready|requirejs-text",auto:!0,deps:["dependencies"],rjsConfig:{paths:{},shim:{}}},request={parent:null,config:{}},bower={settings:{},json:{},config:{paths:{},shim:{}},processed:{}},bowerCounter=0,done,REGEX_PATH_RELATIVE=/^([^a-z|0-9]*)/,REGEX_PATH_SPLIT=/^(.*?)([^/\\]*?)(?:\.([^ :\\/.]*))?$/,REGEX_PATH_BOWER=/^(.*?bower.json)+(.*)$/;function objectExtend(destination,source){return typeof source=="object"&&Object.keys(source).forEach(function(value){destination[value]=source[value]}),destination}function formatBowerFilePath(name){return name=bower.settings.baseUrl+"/"+name+"/bower.json",name}function processBowerFile(name,req,onProcess,config,root){var jsonFileName;req=req||request.parent,config=config||request.config,onProcess=onProcess||function(){},bowerCounter+=1,root&&(done=onProcess);function finished
(bowerConfig){bowerCounter-=1,bowerCounter<1&&done&&done(bowerConfig)}request.config.isBuild?jsonFileName=name.replace(REGEX_PATH_RELATIVE,request.config.appDir):jsonFileName=name,json.load(jsonFileName,req,function(jsonFile){parseBowerFile(name,jsonFile,finished,root)},config)}function parseBowerFile(bowerFilePath,bowerJson,onParse,root){var baseUrl,baseName,parseFilePath=new RegExp(REGEX_PATH_SPLIT),parseRelativePath=new RegExp(REGEX_PATH_RELATIVE),validExt=new RegExp("^("+bower.settings.extensions+")$"),ignoreFile=new RegExp("^("+bower.settings.ignore+")$");typeof bowerJson!="object"?bowerJson=JSON.parse(bowerJson):onParse(bower.config),bowerJson.main=[].concat(bowerJson.main||bowerFilePath),bower.settings.deps.forEach(function(depsPath){bowerJson[depsPath]=Object.keys(bowerJson[depsPath]||{})}),baseUrl=parseFilePath.exec(bowerFilePath)[1],baseName=bowerJson.name,bowerJson.main.forEach(function(moduleName){var name,file,path,ext,filePath=parseFilePath.exec(moduleName);name=bowerJson.
name,path=filePath[1].replace(parseRelativePath,""),file=filePath[2],ext=filePath[3],validExt.test(ext)&&(!ignoreFile.test(baseName)||!bower.processed[baseName])&&(file===name&&ext!=="js"?name=name+"-"+ext:file!==name&&bowerJson.main.length>1?name=file:name=name,bower.config.paths[name]=baseUrl+path+file,bower.config.shim[name]={},bower.config.shim[name].exports=name,bowerJson.dependencies.length>0&&(bower.config.shim[name].deps=bowerJson.dependencies))}),bower.processed[baseName]=!0,bower.settings.deps.forEach(function(bowerDependencies){bowerJson[bowerDependencies]&&bowerJson[bowerDependencies].length>0&&bowerJson[bowerDependencies].forEach(function(dependency){ignoreFile.test(dependency)||processBowerFile(formatBowerFilePath(dependency))})}),onParse(bower.config)}function pluginLoad(name,req,onLoad,config){request.parent=req,request.config=config,bower.settings=defaults,bower.settings=objectExtend(bower.settings,request.config.bower||{}),bower.settings.file=name,processBowerFile(bower
.settings.file,req,function(value){bower.settings.auto&&!request.config.isBuild&&requirejs.config(bower.config),onLoad(bower.config)},config,!0),config&&config.isBuild&&onLoad(bower.config)}function pluginNormalize(name,normalize){var bowerPath=new RegExp(REGEX_PATH_BOWER),bowerFile=bowerPath.exec(name||bower.settings.file||defaults.file);return name=normalize(bowerFile[1]),name}function pluginWrite(pluginName,moduleName,write){var content=JSON.stringify(bower.config);bower.settings.auto?content='define("'+pluginName+"!"+moduleName+'", function(){var bowerConfig='+content+";\nrequirejs.config(bowerConfig);\nreturn bowerConfig;\n});\n":content='define("'+pluginName+"!"+moduleName+'", function(){\nreturn '+content+";\n});\n",write(content)}return{load:pluginLoad,normalize:pluginNormalize,write:pluginWrite}})})();
